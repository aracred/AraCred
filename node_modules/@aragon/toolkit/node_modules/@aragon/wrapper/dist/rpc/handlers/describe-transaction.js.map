{"version":3,"sources":["../../../src/rpc/handlers/describe-transaction.js"],"names":["request","proxy","wrapper","transaction","params","to","Error","data","description","decoratedTransaction","_","processed","annotatedDescription"],"mappings":"aAAA,sC,oDAyduB;4BAvdR,wBAAgBA,OAAhB,CAAyBC,KAAzB,CAAgCC,OAAhC,CAAyC,CACtD,KAAM,CAACC,WAAW,CAAG,EAAf,EAAqBH,OAAO,CAACI,MAAnC,CACA,GAAI,CAACD,WAAW,CAACE,EAAjB,CACE,KAAM,IAAIC,CAAAA,KAAJ,gDAAN,CAEF,GAAI,CAACH,WAAW,CAACI,IAAjB,CACE,KAAM,IAAID,CAAAA,KAAJ,kDAAN,CAGF,GAAIE,CAAAA,WAAJ,CACA,GAAI,CACF,KAAMC,CAAAA,oBAAoB,CAAG,KAAM,kCAAqBN,WAArB,CAAkCD,OAAlC,CAAnC,CACAM,WAAW,CAAGC,oBAAoB,CAACD,WACpC,CAAC,MAAOE,CAAP,CAAU,CAAE,CAEd,GAAIF,WAAJ,CACE,GAAI,CACF,KAAMG,CAAAA,SAAS,CAAG,KAAM,2CAA8BH,WAA9B,CAA2CN,OAA3C,CAAxB,CACA,MAAO,CACLU,oBAAoB,CAAED,SAAS,CAACC,oBAD3B,CAELJ,WAAW,CAAEG,SAAS,CAACH,WAFlB,CAIR,CAAC,MAAOE,CAAP,CAAU,CAAE,CAGhB,MAAO,CACLF,WADK,CAGR","sourcesContent":["import { postprocessRadspecDescription, tryEvaluatingRadspec } from '../../radspec'\n\nexport default async function (request, proxy, wrapper) {\n  const [transaction = {}] = request.params\n  if (!transaction.to) {\n    throw new Error(`Could not describe transaction: missing 'to'`)\n  }\n  if (!transaction.data) {\n    throw new Error(`Could not describe transaction: missing 'data'`)\n  }\n\n  let description\n  try {\n    const decoratedTransaction = await tryEvaluatingRadspec(transaction, wrapper)\n    description = decoratedTransaction.description\n  } catch (_) {}\n\n  if (description) {\n    try {\n      const processed = await postprocessRadspecDescription(description, wrapper)\n      return {\n        annotatedDescription: processed.annotatedDescription,\n        description: processed.description\n      }\n    } catch (_) {}\n  }\n\n  return {\n    description\n  }\n}\n"],"file":"describe-transaction.js"}